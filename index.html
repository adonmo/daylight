<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>daylight: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">daylight
   &#160;<span id="projectnumber">0.1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">daylight Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="static/logo.png" width="300"/>
</div>
 <p><a href="https://github.com/adonmo/daylight/actions"></a> <a href="https://github.com/adonmo/daylight/blob/master/LICENSE.txt"></a> </p>
<p>daylight or libdaylight is a library which enables you to answer daylight related questions like:</p>
<ul>
<li>Irradiance - How bright is it outside, given a particular time and location?</li>
<li>What is the time of sunrise/solarnoon/sunset, given a particular time and location?</li>
</ul>
<p>libdaylight is written in modern C++ with bindings to python using <a href="https://github.com/pybind/pybind11">pybind11</a>.</p>
<p>daylight's python bindings provide vectorized functions - allowing for efficient analysis when dealing with lots of queries. At the same, this allows daylight to play well with established data science tooling like numpy and pandas.</p>
<p>The math used in this library is mostly based on <a href="https://www.esrl.noaa.gov/gmd/grad/solcalc/calcdetails.html">NOAA's solar calculations</a>, which were in turn based on <em><b>Astronomical Algorithms</b></em>, by Jean Meeus. Also thanks to <a href="https://michelanders.blogspot.com/2010/12/calulating-sunrise-and-sunset-in-python.html">this Python implementation</a> of these calculations by Michel Landers, which was a very useful reference while building this library.</p>
<p>⚠️ Currently this library is only tested for basic use cases. For any scientific-grade use cases, or for cases where precise values are needed - this library is not extensively tested, yet. Any contributions from that aspect would be greatly appreciated.</p>
<h1>Installation</h1>
<p>## From <a href="https://pypi.org/project/daylight/">PyPI</a> </p><div class="fragment"><div class="line">$ pip install daylight</div></div><!-- fragment --><p>## From source </p><div class="fragment"><div class="line">$ pip install git+https://github.com/adonmo/daylight</div></div><!-- fragment --><p>Note: This requires cmake and pybind11 to be installed on your system. If you're having trouble with pybind11, <a href="https://github.com/pybind/pybind11/issues/1379#issuecomment-468933426">try using a conda enviroment</a> instead.</p>
<h1>Examples</h1>
<p>The examples directory contains a real world usage of this library at <a href="https://www.adonmo.com">Adonmo</a> - for its season and location independent brightness control mechanism: <a href="/examples/adonmo-daylight-brightness-control.ipynb">Click here</a> to read it.</p>
<div class="image">
<img src="/static/adonmo-daylight-brightness-control.png" alt="Adonmo brightness control mechanism using daylight"/>
</div>
<h1>Usage (Python)</h1>
<div class="fragment"><div class="line">import datetime</div><div class="line">import pytz</div><div class="line"></div><div class="line">import daylight</div><div class="line"></div><div class="line">def epoch(year, month, day, hour=0, minute=0, second=0, tz=pytz.UTC):</div><div class="line">    return int(tz.localize(datetime.datetime(year, month, day, hour, minute, second)).timestamp())</div><div class="line"></div><div class="line">tz = pytz.timezone(&quot;Asia/Kolkata&quot;)</div><div class="line">tz_offset = tz.utcoffset(datetime.datetime.utcnow()).total_seconds() / 3600</div><div class="line"></div><div class="line"># Example with GPS coords for Hyderabad, India, in Indian timezone (IST)</div><div class="line">sun = daylight.Sunclock(17.3859, 78.4867, tz_offset)</div><div class="line"></div><div class="line"># Know the daylight strength / ambient brightness level at a given time of day</div><div class="line"># Below call returns 0.882753920406182</div><div class="line">sun.irradiance(epoch(2020, 5, 21, 14, 10, 35, tz))</div><div class="line"></div><div class="line"># Know the sunrise time for a given date</div><div class="line"># Returns unix timestamp for 5:42 AM</div><div class="line">sun.sunrise(epoch(2020, 5, 21, tz=tz))</div><div class="line"></div><div class="line"># Know the solar noon time for a given date</div><div class="line"># Returns unix timestamp for 12:12 PM</div><div class="line">sun.solar_noon(epoch(2020, 5, 21, tz=tz))</div><div class="line"></div><div class="line"># Know the sunset time for a given date</div><div class="line"># Returns unix timestamp for 18:42 PM</div><div class="line">sun.sunset(epoch(2020, 5, 21, tz=tz))</div><div class="line"></div><div class="line"># daylight&#39;s functions are vectorized as well - which means you can compute results</div><div class="line"># for multiple parameters efficiently, while playing well with libraries like numpy/pandas</div><div class="line"># Returns [-0.56570521  0.28650605]</div><div class="line">sun.irradiance([</div><div class="line">    epoch(2020, 5, 21, 3, 0, 0, tz),</div><div class="line">    epoch(2020, 5, 21, 7, 0, 0, tz),</div><div class="line">])</div></div><!-- fragment --><p>Python API Reference and comparision with other libraries can be found on our docs: <a href="https://adonmo-daylight.readthedocs.io/en/latest/">https://adonmo-daylight.readthedocs.io/en/latest/</a></p>
<h1>Usage (C)</h1>
<p>libdaylight can also be used in C through the provided C API.</p>
<p>Here is an example code on how to do this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;daylight_c.h&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div><div class="line">    <span class="keyword">struct </span><a class="code" href="classSunclock.html">Sunclock</a>* s = newSunclock(17.3859, 78.4867, 5.5);</div><div class="line">    time_t t_20200521141035 = 1590050435;</div><div class="line">    <span class="keywordtype">double</span> <a class="code" href="classSunclock.html#aadccf8aaaf241d3b427f75a2054b6356">irradiance</a> = Sunclock_irradiance(s, t_20200521141035);</div><div class="line">    printf(<span class="stringliteral">&quot;%lf\n&quot;</span>, irradiance);</div><div class="line">    deleteSunclock(s);</div><div class="line">}</div></div><!-- fragment --><p>Save the above file as main.c, and run the following commands to build and run it:</p>
<p>Note: Make sure daylight is <a href="#building">built</a> first before running these commands.</p>
<div class="fragment"><div class="line">$ gcc -I/&lt;path_to_daylight&gt;/capi -c main.c -o main.o</div><div class="line">$ g++ -L/&lt;path_to_daylight&gt;/build/capi main.o -l:libdaylight_c-0.1.1.so -o main</div><div class="line">$ LD_LIBRARY_PATH=/&lt;path_to_daylight&gt;/build/capi ./main</div><div class="line">0.882754</div></div><!-- fragment --><h1>API Reference</h1>
<p>Python: <a href="https://adonmo-daylight.readthedocs.io/en/latest/reference.html">https://adonmo-daylight.readthedocs.io/en/latest/reference.html</a></p>
<p>C++: <a href="https://adonmo.github.io/daylight/">https://adonmo.github.io/daylight/</a></p>
<h1>Development</h1>
<p>libdaylight uses the <a href="https://cmake.org/">CMake</a> build system.</p>
<h2>Building just the library</h2>
<div class="fragment"><div class="line">$ cmake -B build -S .</div><div class="line">$ cmake --build build</div></div><!-- fragment --><p>This builds a static library file <code>libdaylight.a</code></p>
<p>If you make any additional changes, you can just run <code>cmake --build build</code> again to get your changes reflected in the compiled outputs.</p>
<h2>Running tests</h2>
<div class="fragment"><div class="line">$ cmake -B build/test -S test</div><div class="line">$ cmake --build build/test</div><div class="line">$ ./build/test/libdaylight-tests</div></div><!-- fragment --><p> If everything is working okay, you should see "All tests passed".</p>
<p>libdaylight uses the <a href="https://github.com/catchorg/Catch2">Catch2</a> library for its tests.</p>
<h3>Testing the python bindings</h3>
<p>There are no strict tests yet for the python bindings. However you can run an example script file, making this a sanity test at least.</p>
<p>After building, from the tests/python directory, run: </p><div class="fragment"><div class="line">$ python test.py</div></div><!-- fragment --><p> If everything is working okay, you should see "All tests passed".</p>
<h2>Building docs</h2>
<h3>Python (Sphinx)</h3>
<div class="fragment"><div class="line">$ pip install sphinx sphinx_rtd_theme numpy numpydoc</div><div class="line">$ cmake -B build/docs -S documentation</div><div class="line">$ cmake --build build/docs</div><div class="line">$ cmake --build build/docs --target pydocs</div></div><!-- fragment --><p> You can then proceed to host the docs locally, for example on <a href="http://0.0.0.0:8000/">http://0.0.0.0:8000/</a> </p><div class="fragment"><div class="line">$ python -m http.server --directory documentation/python/_build/html</div></div><!-- fragment --> <h3>C++ (Doxygen)</h3>
<div class="fragment"><div class="line">$ cmake -B build/docs -S documentation</div><div class="line">$ cmake --build build/docs</div><div class="line">$ cmake --build build/docs --target cppdocs</div></div><!-- fragment --><p> You can then proceed to host the docs locally, for example on <a href="http://0.0.0.0:8000/">http://0.0.0.0:8000/</a> </p><div class="fragment"><div class="line">$ python -m http.server --directory build/docs/doxygen/html</div></div><!-- fragment --><h2>Contributing</h2>
<p>Issues and pull requests are welcome.</p>
<ul>
<li>For proposing new features/improvements or reporting bugs, <a href="https://github.com/adonmo/daylight/issues/new/choose">create an issue</a>.</li>
<li>Check <a href="https://github.com/adonmo/daylight/issues">open issues</a> for viewing existing ideas, verify if it is already proposed/being worked upon.</li>
<li>When implementing new features make sure to add relavant tests and documentation before sending pull requests.</li>
</ul>
<h2>Related projects</h2>
<p><a href="https://github.com/brandon-rhodes/pyephem">PyEphem</a>, <a href="https://github.com/pvlib/pvlib-python">pvlib-python</a> and <a href="https://github.com/aqreed/solarpy">solarpy</a> are some libraries which have overlap with the type of problems this library solves.</p>
<p>Comparision between them and this library can be <a href="https://adonmo-daylight.readthedocs.io/en/latest/similar-libraries.html">read on our docs</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

